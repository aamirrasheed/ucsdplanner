<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="comparisons.css" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/rivets/0.8.1/rivets.bundled.min.js" type="text/javascript"></script>

  <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="partials/d3pie.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="/comparisons.js" type="text/javascript"></script>
  
  <style href="" type="text/css">
  ul {
    height: 200px;
    overflow: scroll;
  }
  </style>
</head>
<body>
  <div id="topbar">
    <div id="logo"></div>
    <div class="verticalLine"></div>
    <div id="tool-name">comparisons tool</div>
  </div>

  <div rv-each-courseprof="app.displayed_course_profs" class="course-prof" rv-show="courseprof.show">
    <div class="course-prof-header">
      <span id="close" rv-on-click="app.remove_course">&#10006;</span>
      <div class="course-name">
        <span class="course-dept"><b>{courseprof.course.dept}</b></span>
        <span class="course-code"><b>{courseprof.course.code}</b></span>
      </div>
      <div class="prof-div">
        <span class="prof">{courseprof.prof.name}</span>
      </div>
    </div>
    <div class="capes">
      <hr>
      <span><b>CAPEs</b></span>
      <hr>
      <select rv-value="courseprof.current_cape_term" rv-on-change="app.change_cape" class="cape-selector">
        <option rv-each-cape="courseprof.data.capes" rv-value="cape.term">{cape.term}</option> 
      </select>
      <br>
      <span rv-show="courseprof.current_cape.cape_prof_gpa | gradeshow"class="grade">{courseprof.current_cape.cape_prof_gpa | fixed 2} / {courseprof.current_cape.cape_prof_gpa | letter}</span>
      <br>

      <div rv-id="courseprof | grade_dist_chart_id_generator" class="grade-dist-chart"></div>

      <div class="cape-data-entries">
        <div class="data-cell">
          <h4 class="data-title">Recommend Instructor</h4>
          <p class="data-info">{courseprof.current_cape.cape_rec_prof | fixed 1}%</p>
        </div>
        <div class="data-cell">
          <h4 class="data-title">Recommend Class</h4>
          <p class="data-info">{courseprof.current_cape.cape_rec_course | fixed 1}%</p>
        </div>
        <div class="data-cell">
          <h4 class="data-title">Hours/Week</h4>
          <p class="data-info">{courseprof.current_cape.cape_study_hrs | fixed 1}</p>
        </div>
        <div class="data-cell">
          <h4 class="data-title">Complete CAPE Report</h4>
          <a target="_blank" rv-href="courseprof.current_cape.cape_url"><p class="data-info">Link</p></a>
        </div>
      </div>
    </div>

    <div class="rmp">
      <hr>
      <span><b>Rate My Professors</b></span>
      <hr>
			
      <div class="rmp-data-entries">
        <div class="data-cell">
          <h4 class="data-title">Overall</h4>
          <p class="data-info">{courseprof.data.rmp.overall | rmpformatter}</p>
        </div>
        <div class="data-cell">
          <h4 class="data-title">Helpfulness</h4>
          <p class="data-info">{courseprof.data.rmp.helpfulness | rmpformatter}</p>
        </div>
        <div class="data-cell">
          <h4 class="data-title">Clarity</h4>
          <p class="data-info">{courseprof.data.rmp.clarity | rmpformatter}</p>
        </div>
        <div class="data-cell">
          <h4 class="data-title">Easiness</h4>
          <p class="data-info">{courseprof.data.rmp.easiness | rmpformatter}</p>
        </div>
        <div class="data-cell">
          <h4 class="data-title">Comments</h4>
          <a target="_blank" rv-if="courseprof.data.rmp.url" rv-href="courseprof.data.rmp.url">
          	<p class="data-info">Link</p>
          </a>
          <p rv-if="courseprof.data.rmp.url | not" class="data-info">N/A</p>

        </div>
      </div>
    </div>
  </div>
  <div id="course-prof-search">
    <button type="button" rv-on-click="app.add_course">add class</button>
    <div class="input" rv-show="app.show_search">
      <div id="search">
        <i class="material-icons md-18 left">search</i>
        <input type="text" placeholder="course name" rv-value="app.course_search"/>
        <i id="clear" class="material-icons md-18 right" rv-on-click="app.clear_search" rv-show="app.course_search | ne ''">close</i>
      </div>
      <ul id="courses">
        <li rv-each-course="app.courses | mark app.course_search" rv-hide="course.hide" rv-on-click="app.user_selects_course">
          <span class="id" rv-text="course.course_id"></span>
        </li>
      </ul>


      <select rv-value="app.current_course_prof.prof.id" rv-on-change="app.user_selects_prof">
        <option value="" disabled selected>Professor</option>
        <option rv-each-prof="app.profs" rv-disabled="prof | disable_professor" rv-value="prof.id">{prof.name}</option> 
      </select>
    </div>
  </div>
</body>
</html>

